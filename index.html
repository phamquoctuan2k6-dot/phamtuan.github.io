<script>
        // --- CẤU HÌNH ---
        const mqtt_topic = "phamtuan_k6/den_led_onboard"; 
        const broker = "broker.hivemq.com";
        
        // SỬA 1: Đổi cổng sang 8884 (Cổng bảo mật WSS)
        const port = 8884; 

        const clientID = "web_led_" + new Date().getTime();
        const client = new Paho.MQTT.Client(broker, port, clientID);

        // Hàm kết nối
        client.connect({
            useSSL: true,  // SỬA 2: Thêm dòng này bắt buộc cho GitHub Pages
            onSuccess: function() {
                document.getElementById("status").innerHTML = "Đã kết nối Server!";
                document.getElementById("status").style.color = "green";
                console.log("Connected via WSS");
            },
            onFailure: function(e) {
                document.getElementById("status").innerHTML = "Lỗi: " + e.errorMessage;
                document.getElementById("status").style.color = "red";
                console.log(e);
            }
        });

        // ... (Phần hàm send giữ nguyên) ...
        function send(cmd) {
            if (client.isConnected()) {
                message = new Paho.MQTT.Message(cmd);
                message.destinationName = mqtt_topic;
                client.send(message);
            }
        }
    </script>
