<script>
        // --- CẤU HÌNH MỚI (Dùng EMQX để không bị chặn) ---
        const mqtt_topic = "phamtuan_k6/den_led_onboard"; 
        const broker = "broker.emqx.io";  // Đổi sang server này
        const port = 8084;  // Cổng bảo mật WSS (Quan trọng!)

        const clientID = "web_led_" + new Date().getTime();
        const client = new Paho.MQTT.Client(broker, port, clientID);

        // Hàm kết nối
        client.connect({
            useSSL: true, // BẮT BUỘC PHẢI CÓ
            onSuccess: function() {
                document.getElementById("status").innerHTML = "Đã kết nối (Bảo mật)!";
                document.getElementById("status").style.color = "green";
            },
            onFailure: function(e) {
                document.getElementById("status").innerHTML = "Lỗi: " + e.errorMessage;
                document.getElementById("status").style.color = "red";
                console.log(e);
            }
        });

        // Các phần còn lại giữ nguyên...
        function send(cmd) {
            if (client.isConnected()) {
                message = new Paho.MQTT.Message(cmd);
                message.destinationName = mqtt_topic;
                client.send(message);
                console.log("Đã gửi: " + cmd);
            }
        }
    </script>
